データフォーマット
==============

独自のデータセットでASReviewを使用して系統的レビューを実行するには、データファイルが
特定のフォーマットに準拠する必要があります。ASReviewは以下のフォーマットを受け付けます：


表形式ファイルフォーマット
-------------------------

拡張子が ``.csv``, ``.tab``, ``.tsv``, または ``.xlsx`` の表形式データセットを
ASReview LAB で使用できます。CSVおよびTABファイルは、コンマ、セミコロン、または
タブ区切りが推奨されます。推奨ファイルエンコーディングは *UTF-8* または *latin1* です。

表形式データファイルについて、ソフトウェアは事前に定義された一連の列名を受け付けます：

.. _column-names:

.. table:: 列名定義テーブル
    :widths: 20 60 20

    +-------------+---------------------------------------------------------------------------------------------------------+-----------+
    | 名前        | 列名                                                                                            | 必須 |
    +=============+=========================================================================================================+===========+
    | タイトル       | title, primary_title                                                                                    | はい\*     |
    +-------------+---------------------------------------------------------------------------------------------------------+-----------+
    | アブストラクト    | abstract, abstract note                                                                                 | はい\*     |
    +-------------+---------------------------------------------------------------------------------------------------------+-----------+
    | キーワード    | keywords                                                                                                | いいえ        |
    +-------------+---------------------------------------------------------------------------------------------------------+-----------+
    | 著者名     | authors, author names, first_authors                                                                    | いいえ        |
    +-------------+---------------------------------------------------------------------------------------------------------+-----------+
    | DOI         | doi                                                                                                     | いいえ        |
    +-------------+---------------------------------------------------------------------------------------------------------+-----------+
    | URL         | url                                                                                                     | いいえ        |
    +-------------+---------------------------------------------------------------------------------------------------------+-----------+
    | 含まれる    | final_included, label, label_included, included_label, included_final, included, included_flag, include | いいえ        |
    +-------------+---------------------------------------------------------------------------------------------------------+-----------+


\* タイトルまたはアブストラクトのいずれかが必須です。

**タイトル、アブストラクト** 各レコード（つまり、データセット内のエントリ）は論文のメタデータを
保持している必要があります。必須のメタデータは ``title`` または ``abstract`` のみです。
タイトルとアブストラクトの両方が利用可能な場合、テキストは結合されてモデルの訓練に
使用されます。``title`` 列が空の場合、ソフトウェアは次の列 ``primary_title`` を検索し、
``abstract`` と ``abstract_note`` についても同様です。

**キーワード、著者** ``keywords`` および/または ``author`` （列が空の場合： ``author names`` または ``first_authors``）が
利用可能な場合、事前知識の検索に使用できます。この情報はスクリーニング段階では
表示されず、モデルの訓練にも使用されませんが、APIを通じて情報を利用できます。

**DOIとURL**
Digital Object Identifier（``DOI``）が利用可能な場合、スクリーニング段階で全文文書への
クリック可能なハイパーリンクとして表示されます。同様に、URLが提供されている場合も
クリック可能なリンクとして表示されます。ASReviewを使用することで全文に自動的にアクセスできる
わけでは *ない* ことに注意してください。アクセスできない場合は、この `ブログ投稿 <https://asreview.ai/blog/tools-that-work-well-with-asreview-google-scholar-button/>`__ を
読むことをお勧めします。

**含まれる**
既存のラベル付け決定を示すバイナリ変数で、``0`` = 関連なし/除外、``1`` = 関連あり/含まれる。
ラベルが存在しない場合、レコードはレビューアーによって見られていないと仮定します。
異なる列名が許可されています。表を参照してください。ラベルの動作はモードごとに異なります。
:doc:`data_labeled` を参照してください。


RISファイルフォーマット
-----------------

RISファイルフォーマット（拡張子 ``.ris`` または ``.txt``）はIEEE Xplore、Scopus、ScienceDirectなどの
デジタルライブラリで使用されています。引用管理ソフトのMendeley、RefWorks、Zotero、EndNoteも
RISファイルフォーマットをサポートしています。フォーマットの詳細情報については
`(wikipedia) <https://en.wikipedia.org/wiki/RIS_(file_format)>`__ を参照してください。

RISファイルフォーマットの解析のため、ASReview LAB はPython RISファイルパーサーおよびリーダー
(`rispy <https://pypi.org/project/rispy/>`__)を使用しています。成功するインポート/エクスポートは
適切なデータセット構造に依存します。受け入れられるフィールドとデフォルトマッピングの
完全なリストは `rispy GitHubページ <https://github.com/MrTango/rispy>`_ で確認できます。

ラベル ``ASReview_relevant``、``ASReview_irrelevant``、``ASReview_not_seen`` はN1（Notes）タグとして
保存され、ASReview LAB に再インポートできます。ラベルの動作はモードごとに異なります。
:doc:`data_labeled` を参照してください。

.. tip::

  ラベル ``ASReview_relevant``、``ASReview_irrelevant``、``ASReview_not_seen`` はN1（Notes）タグとして
  保存されます。引用管理ソフトZoteroとEndnoteでは、これらのラベルを選択に使用できます。
  スクリーンショットを参照するか、`指導ビデオ <https://www.youtube.com/watch?v=-Rw291AE2OI>`_ をご覧ください。

.. note::

  RISファイルフォーマットで部分的にラベル付けされたデータセットを再インポートする場合、
  N1フィールドに保存されたラベルが事前知識として使用されます。完全にラベル付けされた
  データセットを再インポートする場合は、探索モードおよびシミュレーションモードで使用できます。

.. figure:: ../../images/asreview_export_to_zotero_labeled.png
   :alt: Example record with a labeling decision imported to Zotero

   Zoteroにインポートされたラベル付け決定を含むレコードの例


.. figure:: ../../images/asreview_export_to_endnote_labeled.png
   :alt: Example record with a labeling decision imported to Endnote

   Endnoteにインポートされたラベル付け決定を含むレコードの例
